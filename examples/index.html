<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Notectl</title>
  <style>
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          max-width: 1000px;
          margin: 40px auto;
          padding: 20px;
          background: #f5f5f5;
      }

      h1 {
          color: #333;
          margin-bottom: 10px;
      }

      .description {
          color: #666;
          margin-bottom: 30px;
      }

      #editor-container {
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          padding: 20px;
          min-height: 400px;
      }

      /* Basic editor styling */
      notectl-editor {
          display: block;
          min-height: 300px;
      }
  </style>
</head>
<body>
<h1>notectl</h1>

<div id="editor-container"></div>

<!-- Load Notectl Core and Plugins -->
<script src="../packages/core/dist/notectl-core.umd.cjs"></script>
<script src="../packages/plugins/toolbar/dist/toolbar.umd.cjs"></script>
<script src="../packages/plugins/table/dist/table.umd.cjs"></script>

<script>
  async function initEditor() {
    try {
      // Create editor instance
      const editor = new NotectlCore.NotectlEditor();

      // Add editor to DOM (this triggers connectedCallback)
      document.getElementById('editor-container').appendChild(editor);

      // Register plugins (containers now exist)
      await editor.registerPlugin(NotectlToolbar.createToolbarPlugin());
      await editor.registerPlugin(NotectlTable.createTablePlugin());

      // Listen to content changes
      editor.on('change', (data) => {
        console.log('Editor content changed');
        console.log('HTML:', editor.getHTML());
      });

      // Editor is ready
      console.log('Notectl editor initialized successfully!');

    } catch (error) {
      console.error('Failed to initialize editor:', error);
    }
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initEditor);
  } else {
    initEditor();
  }
</script>
</body>
</html>
