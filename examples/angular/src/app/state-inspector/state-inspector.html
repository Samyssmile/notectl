<div class="inspector-header">
  <span class="inspector-title">State Inspector</span>
  <span class="transaction-badge">{{ transactionCount() }} transactions</span>
</div>

<div class="inspector-sections">
  <div class="section">
    <button
      class="section-toggle"
      [attr.aria-expanded]="isExpanded('document')"
      aria-controls="section-document"
      (click)="toggleSection('document')"
    >
      <span class="chevron" [class.chevron--expanded]="isExpanded('document')" [class.chevron--collapsed]="!isExpanded('document')"></span>
      Document
    </button>
    @if (isExpanded('document')) {
      <div class="section-content" id="section-document" role="region" aria-label="Document state">
        <pre [innerHTML]="documentJson() | jsonSyntax"></pre>
      </div>
    }
  </div>

  <div class="section">
    <button
      class="section-toggle"
      [attr.aria-expanded]="isExpanded('selection')"
      aria-controls="section-selection"
      (click)="toggleSection('selection')"
    >
      <span class="chevron" [class.chevron--expanded]="isExpanded('selection')" [class.chevron--collapsed]="!isExpanded('selection')"></span>
      Selection
    </button>
    @if (isExpanded('selection')) {
      <div class="section-content" id="section-selection" role="region" aria-label="Selection state">
        <pre [innerHTML]="selectionJson() | jsonSyntax"></pre>
      </div>
    }
  </div>

  <div class="section">
    <button
      class="section-toggle"
      [attr.aria-expanded]="isExpanded('transaction')"
      aria-controls="section-transaction"
      (click)="toggleSection('transaction')"
    >
      <span class="chevron" [class.chevron--expanded]="isExpanded('transaction')" [class.chevron--collapsed]="!isExpanded('transaction')"></span>
      Last Transaction
    </button>
    @if (isExpanded('transaction')) {
      <div class="section-content" id="section-transaction" role="region" aria-label="Transaction state">
        <pre [innerHTML]="transactionJson() | jsonSyntax"></pre>
      </div>
    }
  </div>
</div>
